{% extends 'base.html.twig' %}

{% block metatitle %}Ajouter un {{ entity_type }} | Strengthmate{% endblock %}

{% block body %}
    <div class="container">
        <h1 class="mb-4 text-center">Ajouter un {{ entity_type }}</h1>

        <!-- Conteneur noir -->
        <div class="card card-large bg-dark text-white">
            <div class="card-body">
                <h2 class="text-center mb-4">Nouveau {{ entity_type }}</h2>
                {{ form_start(form) }}

                <!-- Champ Titre -->
                <div class="mb-3">
                    {{ form_label(form.title, 'Titre', {'label_attr': {'class': 'form-label'}}) }}
                    {{ form_widget(form.title, {'attr': {'class': 'form-control'}}) }}
                </div>

                <!-- Champ Contenu -->
                <div class="mb-3">
                    {{ form_label(form.content, 'Contenu', {'label_attr': {'class': 'form-label'}}) }}
                    {{ form_widget(form.content, {'attr': {'class': 'form-control', 'rows': '6'}}) }}
                </div>

                <!-- Champ Évaluation (Étoiles) -->
                <div class="mb-3">
                    <div class="rating-container">
                        <div class="rating">
                            {% for i in 5..1 %}
                                <input value="{{ i }}"
                                       name="{{ form.rating.vars.full_name }}"
                                       id="star{{ i }}"
                                       type="radio"
                                       {% if form.rating.vars.value is defined and form.rating.vars.value == i %}checked{% endif %}>
                                <label for="star{{ i }}"></label>
                            {% endfor %}
                        </div>
                        {{ form_widget(form.rating, { 'attr': {'id': 'rating-value', 'class': 'd-none'} }) }}
                    </div>
                </div>

                <!-- Bouton Enregistrer -->
                <button type="submit" class="btn btn-warning w-100 mt-3">Enregistrer</button>
                {{ form_end(form) }}
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const ratingInputs = document.querySelectorAll('.rating input');
            const hiddenRating = document.getElementById('rating-value');

            ratingInputs.forEach(input => {
                input.addEventListener("change", function () {
                    hiddenRating.value = this.value;
                });
            });
        });
    </script>
{% endblock %}
