{% extends 'base.html.twig' %}

{% block metatitle %}Modifier {{ entity_type }} - {{ entity.title }} | Strengthmate{% endblock %}

{% block body %}
    <div class="container mt-5">
        <h1 class="text-center mb-4">Modifier {{ entity_type }} - {{ entity.title }}</h1>

        {{ form_start(form) }}
        {{ form_widget(form) }}
        <button type="submit" class="btn btn-primary">Mettre à jour</button>
        {{ form_end(form) }}

        <a href="{{ path('app_admin_entity_show', {'entityType': entity_type, 'id': entity.id}) }}" class="btn btn-secondary mt-3">Retour aux détails</a>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const ratingInputs = document.querySelectorAll('.rating input');
            ratingInputs.forEach(input => {
                input.addEventListener('change', function() {
                    const rating = this.value;
                    const stars = this.closest('.rating').querySelectorAll('label');
                    stars.forEach((star, index) => {
                        if (index < rating) {
                            star.classList.add('filled');
                        } else {
                            star.classList.remove('filled');
                        }
                    });
                });
            });
        });
    </script>
{% endblock %}
